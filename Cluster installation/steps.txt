
I'm going to deploy a cluster with one Node as Master and 3 Nodes as worker.
All servers have same configuration as below: 
  OS: ubuntu 20.04
  RAM: 8 GB
  CPU: 4 vCPU
  Disk: 1*100 GB
  
on all nodes:
  # update repositories 
	sudo apt update 
  # add kubernetes repository and install required  binaries 
	sudo curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -
	sudo echo "deb https://apt.kubernetes.io/ kubernetes-xenial main" | sudo tee /etc/apt/sources.list.d/kubernetes.list
	sudo apt update
	sudo apt -y install  kubelet kubeadm kubectl
  # Disable swap 
	sudo sed -i '/ swap / s/^\(.*\)$/#\1/g' /etc/fstab
	sudo swapoff -a
	# Enable kernel modules
	sudo modprobe overlay
	sudo modprobe br_netfilter
	# Add some settings to sysctl
	sudo tee /etc/sysctl.d/kubernetes.conf<<EOF
	net.bridge.bridge-nf-call-ip6tables = 1
	net.bridge.bridge-nf-call-iptables = 1
	net.ipv4.ip_forward = 1
	EOF

	# Reload sysctl
	sudo sysctl --system
	# Add Cri-o repo
	sudo su -
	OS="xUbuntu_20.04"
	VERSION=1.23
	sudo echo "deb https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/$OS/ /" > /etc/apt/sources.list.d/devel:kubic:libcontainers:stable.list
	sudo echo "deb http://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable:/cri-o:/$VERSION/$OS/ /" > /etc/apt/sources.list.d/devel:kubic:libcontainers:stable:cri-o:$VERSION.list
	sudo curl -L https://download.opensuse.org/repositories/devel:kubic:libcontainers:stable:cri-o:$VERSION/$OS/Release.key | apt-key add -
	sudo curl -L https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/$OS/Release.key | apt-key add -
	sudo apt update
	apt -y  install cri-o cri-o-runc
	sudo systemctl enable crio --now 
######## prepare Master node #############
	On the master node: 
	systemctl enable kubelet
	kubeadm config images pull
	kubeadm init --pod-network-cidr=10.85.0.0/16
  # write done the join command 
  # kubeadm join --discovery-token abcdef.1234567890abcdef --discovery-token-ca-cert-hash sha256:1234..cdef 1.2.3.4:6443
	mkdir -p $HOME/.kube
	sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
	sudo chown $(id -u):$(id -g) $HOME/.kube/config
	# verify with : 
  kubectl cluster-info
	## INSTALL CALICO
	kubectl create -f https://docs.projectcalico.org/manifests/tigera-operator.yaml 
	kubectl create -f https://docs.projectcalico.org/manifests/custom-resources.yaml
  ######### prepare Worker nodes ########### 
	# on the worker nodes enter the join command which is generated by kubeadm command on master node 
  kubeadm join --discovery-token abcdef.1234567890abcdef --discovery-token-ca-cert-hash sha256:1234..cdef 1.2.3.4:6443
	
